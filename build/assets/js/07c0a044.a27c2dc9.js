"use strict";(self.webpackChunkaelysium_wiki=self.webpackChunkaelysium_wiki||[]).push([[8],{4137:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(t),u=o,f=p["".concat(s,".").concat(u)]||p[u]||m[u]||r;return t?a.createElement(f,i(i({ref:n},d),{},{components:t})):a.createElement(f,i({ref:n},d))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4115:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=t(7462),o=(t(7294),t(4137));const r={title:"\u2139\ufe0f Updating from v5 to V6",sidebar_position:6},i=void 0,l={unversionedId:"rusty-connector/docs/updating/update-from-config-v5-to-v6",id:"rusty-connector/docs/updating/update-from-config-v5-to-v6",title:"\u2139\ufe0f Updating from v5 to V6",description:"On this page, we will walk you through how to update your config from v5 to v6!",source:"@site/docs/rusty-connector/docs/updating/update-from-config-v5-to-v6.md",sourceDirName:"rusty-connector/docs/updating",slug:"/rusty-connector/docs/updating/update-from-config-v5-to-v6",permalink:"/rusty-connector/docs/updating/update-from-config-v5-to-v6",draft:!1,editUrl:"https://github.com/Aelysium-Group/wiki/docs/rusty-connector/docs/updating/update-from-config-v5-to-v6.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"\u2139\ufe0f Updating from v5 to V6",sidebar_position:6},sidebar:"plugins_wiki_rusty_connector",previous:{title:"\u2139\ufe0f Updating from v4 to V5",permalink:"/rusty-connector/docs/updating/update-from-config-v4-to-v5"},next:{title:"\ud83d\udcd6 Overview",permalink:"/rusty-connector/lang/installation"}},s={},c=[{value:"Disclaimer",id:"disclaimer",level:2},{value:"Walkthrough",id:"walkthrough",level:2},{value:"1. config.yml",id:"1-configyml",level:3},{value:"2. private.key",id:"2-privatekey",level:3},{value:"3. Port Redis and MySQL settings",id:"3-port-redis-and-mysql-settings",level:3},{value:"4. extras/data_transit.yml",id:"4-extrasdata_transityml",level:3},{value:"5. extras/dynamic_teleport.yml",id:"5-extrasdynamic_teleportyml",level:3},{value:"6. extras/party.yml",id:"6-extraspartyyml",level:3},{value:"7. families.yml",id:"7-familiesyml",level:2},{value:"8. Any family configs",id:"8-any-family-configs",level:2},{value:"9. Port MCLoader configurations over to Magic Configs",id:"9-port-mcloader-configurations-over-to-magic-configs",level:2}],d={toc:c},p="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"On this page, we will walk you through how to update your config from v5 to v6!\n",(0,o.kt)("strong",{parentName:"p"},"Before updating to v6, remember that databases containing data from previous versions of RC will not work in v0.8.0 (Beta software lulz)")),(0,o.kt)("h2",{id:"disclaimer"},"Disclaimer"),(0,o.kt)("p",null,"It can be a hassle going through and updating config files.\nIf you'd rather just configure a fresh installation of the configs instead of attempting to update your already existing ones. You can simply delete your config files and RC will generate new ones on the next boot."),(0,o.kt)("h2",{id:"walkthrough"},"Walkthrough"),(0,o.kt)("h3",{id:"1-configyml"},"1. config.yml"),(0,o.kt)("p",null,"Update ",(0,o.kt)("inlineCode",{parentName:"p"},"version")," to be ",(0,o.kt)("inlineCode",{parentName:"p"},"6"),".\nTake the entire ",(0,o.kt)("inlineCode",{parentName:"p"},"server-lifecycle")," and put it in the root yaml context. Rename ",(0,o.kt)("inlineCode",{parentName:"p"},"server-lifecycle")," to be ",(0,o.kt)("inlineCode",{parentName:"p"},"magic-link"),".\nIt should look like this"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'magic-link:\n#\n# Amount of time, in seconds, that a server can go without pinging the proxy.\n# If a server doesn\'t ping the proxy in this time, it will be declared stale\n# and be unregistered from the proxy.\n#\n    server-timeout: 15\n\n#\n# Amount of time, in seconds, that a server should wait to ping the proxy.\n# This setting cannot be higher than "server-timeout".\n#\n    server-ping-interval: 10\n')),(0,o.kt)("p",null,"Remove the rest of ",(0,o.kt)("inlineCode",{parentName:"p"},"services")," that remains after removing ",(0,o.kt)("inlineCode",{parentName:"p"},"server-lifecycle")),(0,o.kt)("h3",{id:"2-privatekey"},"2. private.key"),(0,o.kt)("p",null,"Create a new folder called ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata")," and move your ",(0,o.kt)("inlineCode",{parentName:"p"},"private.key")," into it."),(0,o.kt)("h3",{id:"3-port-redis-and-mysql-settings"},"3. Port Redis and MySQL settings"),(0,o.kt)("p",null,"Replace the current ",(0,o.kt)("inlineCode",{parentName:"p"},"storage")," configuration nodes with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'storage:\n    provider: MYSQL\n\n\n\n    additional-providers:\n        MYSQL:\n            host: "0.0.0.0"\n            port: 3306\n            user: "default"\n            password: "password"\n            database: "RustyConnector"\n')),(0,o.kt)("p",null,"We plan on adding additional storage providers like SQLite, MongoDB, and more in the future. The strange formating here is laying the groundwork for that."),(0,o.kt)("h3",{id:"4-extrasdata_transityml"},"4. extras/data_transit.yml"),(0,o.kt)("p",null,"Remove the entire ",(0,o.kt)("inlineCode",{parentName:"p"},"max-packet-length")," parameter."),(0,o.kt)("h3",{id:"5-extrasdynamic_teleportyml"},"5. extras/dynamic_teleport.yml"),(0,o.kt)("p",null,"At the end of the file, paste in:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'############################################################\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n#                     Family Injectors                     #\n#                                                          #\n#               ----------------------------               #\n#                                                          #\n# | Family injection is similar to Velocity\'s forced hosts #\n# | system.                                                #\n#                                                          #\n# | It lets players connect to your network from certain   #\n# | hosts, and it will connect them directly to a          #\n# | specific family.                                       #\n#               -----------------------------              #\n#                                                          #\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n############################################################\nfamily-injectors:\n    enabled: false\n\n    #\n    # List as many injectors as you\'d like!\n    #\n    injectors:\n        - host: "join.aelysium.group"\n          family: "lobby"\n\n')),(0,o.kt)("h3",{id:"6-extraspartyyml"},"6. extras/party.yml"),(0,o.kt)("p",null,"After ",(0,o.kt)("inlineCode",{parentName:"p"},"switch-power"),", paste in the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"    ############################################################\n    #||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n    #                   On Server Overflow                     #\n    #                                                          #\n    #               ---------------------------                #\n    # | Set the server overflow handler to use.                #\n    # | A server is considered \"overflown\" based on            #\n    # | Switch Power. If a server is overflown, this defines   #\n    # | what should happen.                                    #\n    #                                                          #\n    #  \u26ab KICK_FROM_PARTY -                                    #\n    #             The number of players that are over the      #\n    #             server's threshold will be kicked from       #\n    #             the party.                                   #\n    #  \u26ab STAY_BEHIND -                                        #\n    #             The number of players that are over the      #\n    #             server's threshold will not be able to       #\n    #             connect to the server but they'll stay       #\n    #             in the party.                                #\n    #             Next time the party switches servers,        #\n    #             those players will also attempt to join the  #\n    #             rest of the party.                           #\n    #  \u26ab HARD_BLOCK -                                         #\n    #             If there are to many players to fit into     #\n    #             the new server, the entire party will be     #\n    #             prevented from joining the server.           #\n    #               ---------------------------                #\n    #                                                          #\n    #||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n    ############################################################\n    on-server-overflow: HARD_BLOCK\n")),(0,o.kt)("h2",{id:"7-familiesyml"},"7. families.yml"),(0,o.kt)("p",null,"At the end of the file, paste in the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"############################################################\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n#                      Ranked Family                       #\n#                                                          #\n#               ---------------------------                #\n#                                                          #\n# | Ranked families implement matchmaking algorithms.      #\n# | When a player attempts to connect to a ranked family   #\n# | they will remain in their current family until         #\n# | matchmaking is finished and a game can be started      #\n# | the player is then connected to the family.            #\n#                                                          #\n# | Once a server is in-session it will automatically      #\n# | be locked and new sessions won't be able to join       #\n# | until the server is unlocked.                          #\n#                                                          #\n# | Ranked families can't be used as parent families.      #\n#                                                          #\n# WARNING:                                                 #\n#   Ranked families are disrespectful of player parties    #\n#   if a party attempts to connect to a ranked family      #\n#   they will be blocked and forced to separate before     #\n#   they can join. Full party support will most likely     #\n#   come in a future update.                               #\n#                                                          #\n#               ---------------------------                #\n#                                                          #\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n############################################################\nranked: []\n")),(0,o.kt)("h2",{id:"8-any-family-configs"},"8. Any family configs"),(0,o.kt)("p",null,"Remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"load-balancing")," config option completly, instead paste in the following code block.\nAll load balancing configs now exist separate to the families. Be sure to copy your load balancing settings over from your individual families to the new load balancing configs."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'############################################################\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n#                      Load Balancing                      #\n#                                                          #\n#               ---------------------------                #\n#                                                          #\n# | Load balancing is the system through which networks    #\n# | manage player influxes by spreading out players        #\n# | across various server nodes.                           #\n#                                                          #\n#               ---------------------------                #\n#                                                          #\n#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#\n############################################################\nload-balancer: "default"\n')),(0,o.kt)("h2",{id:"9-port-mcloader-configurations-over-to-magic-configs"},"9. Port MCLoader configurations over to Magic Configs"),(0,o.kt)("p",null,"Since most MCLoaders are usually duplicates of eachother, certain configurations have been moved to the proxy.\nThe new format for MCLoader ",(0,o.kt)("inlineCode",{parentName:"p"},"config.yml")," is"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="MCLoader config.yml"',title:'"MCLoader','config.yml"':!0},'#\n# If you need help updating your configs from an older version;\n# take a look at our config migration docs:\n#\n# https://wiki.aelysium.group/rusty-connector/docs/updating/\n#\nversion: 6\n\n#\n# Define the MCLoader Config to load from the proxy.\n# To define new custom configs in the proxy look in the "magic_configs" folder.\n# The definition below can contain ".yml" or not, it doesn\'t matter.\n#\nmagic-config: "default"\n\n#\n# The address used to connect to this server.\n# This address should match what a player would enter if they were trying to connect directly to this server.\n# Make sure you also include the port number!\n#\n# If you leave this empty, RustyConnector will grab this server\'s port number and attempt to resolve your server\'s address from that.\n#\n# Example: 127.0.0.1:25565\n#\naddress: ""\n\n#\n# An optional display name that can be used to represent this MCLoader in the console.\n# If you do not provide a display name, this MCLoader\'s UUID will be shown instead.\n# Please keep in mind that an MCLoader\'s UUID will change each time you restart it.\n#\n# Display names can\'t be longer than 16 characters.\n#\ndisplay-name: ""\n')),(0,o.kt)("p",null,"Notice how details such as ",(0,o.kt)("inlineCode",{parentName:"p"},"family"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"soft-cap"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"hard-cap")," have been removed? These now appear in ",(0,o.kt)("inlineCode",{parentName:"p"},"magic_configs")," on the proxy.\nMCLoaders now refernce a single magic_config by name. Then, once they register, they register using all the parameters listed in that magic config. This way you can update the family names for MCLoaders en-mass, without needing to access them all directly."),(0,o.kt)("p",null,"Feel free to set ",(0,o.kt)("inlineCode",{parentName:"p"},"magic-config")," to whatever you want. If an MCLoader tries to connect with a magic config that doesn't exist, a new one will be created."))}m.isMDXComponent=!0}}]);