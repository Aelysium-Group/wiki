<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rusty-connector/docs/updating/update-from-config-v3-to-v4">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">ℹ️ Updating from V3 to V4 | Aelysium Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wiki.aelysium.group/images/og-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wiki.aelysium.group/images/og-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wiki.aelysium.group/rusty-connector/docs/updating/update-from-config-v3-to-v4"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ℹ️ Updating from V3 to V4 | Aelysium Wiki"><meta data-rh="true" name="description" content="On this page, we will walk you through how to update your config from v3 to v4!"><meta data-rh="true" property="og:description" content="On this page, we will walk you through how to update your config from v3 to v4!"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.aelysium.group/rusty-connector/docs/updating/update-from-config-v3-to-v4"><link data-rh="true" rel="alternate" href="https://wiki.aelysium.group/rusty-connector/docs/updating/update-from-config-v3-to-v4" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://wiki.aelysium.group/rusty-connector/docs/updating/update-from-config-v3-to-v4" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b44974d0.css">
<link rel="preload" href="/assets/js/runtime~main.fb3405e0.js" as="script">
<link rel="preload" href="/assets/js/main.ab42f3d2.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/aelysium-logo.png" alt="Aelysium Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/aelysium-logo.png" alt="Aelysium Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Aelysium</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rusty-connector/">RustyConnector</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/rusty-connector/docs/updating/update-from-config-v3-to-v4" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="https://github.com/Aelysium-Group/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">💖 Help us translate</a></li></ul></div><a href="https://github.com/Aelysium-Group" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rusty-connector/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rusty-connector/docs/installation">Docs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/installation">📖 Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/the_law">📜 The Law</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/commands">⚙️ Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/permissions">📌 Permissions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rusty-connector/docs/concepts/families/">📖 Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/rusty-connector/docs/updating/">⚒️ Config Updating</a><button aria-label="Toggle the collapsible sidebar category &#x27;⚒️ Config Updating&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/updating/update-from-config-v1-to-v2">ℹ️ Updating from V1 to V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/updating/update-from-config-v2-to-v3">ℹ️ Updating from V2 to V3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rusty-connector/docs/updating/update-from-config-v3-to-v4">ℹ️ Updating from V3 to V4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/updating/update-from-config-v4-to-v5">ℹ️ Updating from v4 to V5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/rusty-connector/docs/updating/update-from-config-v5-to-v6">ℹ️ Updating from v5 to V6</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rusty-connector/lang/installation">Lang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rusty-connector/toolkit/installation">Toolkit</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Docs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/rusty-connector/docs/updating/"><span itemprop="name">⚒️ Config Updating</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ℹ️ Updating from V3 to V4</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ℹ️ Updating from V3 to V4</h1></header><p>On this page, we will walk you through how to update your config from v3 to v4!
v4 introduces many new config files! Be ready to do some copy and pasting.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="disclaimer">Disclaimer<a href="#disclaimer" class="hash-link" aria-label="Direct link to Disclaimer" title="Direct link to Disclaimer">​</a></h2><p>It can be a hassle going through and updating config files.
If you&#x27;d rather just configure a fresh installation of the configs instead of attempting to update your already existing ones. You can simply delete your config files and RC will generate new ones on the next boot.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="unchanging">Unchanging<a href="#unchanging" class="hash-link" aria-label="Direct link to Unchanging" title="Direct link to Unchanging">​</a></h2><p>All configuration files are changed in some way.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="walkthrough">Walkthrough<a href="#walkthrough" class="hash-link" aria-label="Direct link to Walkthrough" title="Direct link to Walkthrough">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-update-config-version">1. Update config version<a href="#1-update-config-version" class="hash-link" aria-label="Direct link to 1. Update config version" title="Direct link to 1. Update config version">​</a></h3><p>In order for RC to load all of it&#x27;s new configs, update your config.yml version to <code>version: 4</code> immediately.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-update-server-lifecycle">2. Update server lifecycle.<a href="#2-update-server-lifecycle" class="hash-link" aria-label="Direct link to 2. Update server lifecycle." title="Direct link to 2. Update server lifecycle.">​</a></h3><p>In your config.yml, replace <code>services.server-lifecycle</code> with the following.</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Manages the lifecycles of servers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Also manages the lifecycle of a player&#x27;s home server if you are using Static Families.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server-lifecycle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Amount of time, in seconds, that a server can go without pinging the proxy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If a server doesn&#x27;t ping the proxy in this time, it will be declared stale</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># and be unregistered from the proxy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">server-timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Amount of time, in seconds, that a server should wait to ping the proxy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This setting cannot be higher than &quot;server-timeout&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">server-ping-interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the introduction of Magic Link, servers now ping the proxy continuously.
There&#x27;s no longer any such thing as a &quot;register&quot; or &quot;unregister&quot; request/command.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-migrate-families-to-familiesyml">3. Migrate <code>families</code> to <code>families.yml</code><a href="#3-migrate-families-to-familiesyml" class="hash-link" aria-label="Direct link to 3-migrate-families-to-familiesyml" title="Direct link to 3-migrate-families-to-familiesyml">​</a></h3><p>After adjusting your server lifecycle options, your config.yml should load properly allowing the rest of v4&#x27;s new config files to load.
Among these should be the new <code>families.yml</code>. Take all of your families data from <code>config.yml</code> and migrate it to <code>families.yml</code>.
Make sure that you delete the entire <code>families</code> section from <code>config.yml</code> as it is no-longer needed.</p><p>Additionally, remove the <code>mysql</code> section from <code>config.yml</code> and move that to <code>families.yml</code> as well.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-migrate-mysql-to-familiesyml">3. Migrate <code>mysql</code> to <code>families.yml</code><a href="#3-migrate-mysql-to-familiesyml" class="hash-link" aria-label="Direct link to 3-migrate-mysql-to-familiesyml" title="Direct link to 3-migrate-mysql-to-familiesyml">​</a></h3><p>After migrating your families to <code>families.yml</code>.
Go back and also migrate the <code>mysql</code> section from <code>config.yml</code> to <code>families.yml</code> as well.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-clean-up-configyml">4. Clean up <code>config.yml</code><a href="#4-clean-up-configyml" class="hash-link" aria-label="Direct link to 4-clean-up-configyml" title="Direct link to 4-clean-up-configyml">​</a></h3><p>Delete the following config nodes from <code>config.yml</code>. Also be sure to delete their respective sub-nodes and comments.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delete">Delete:<a href="#delete" class="hash-link" aria-label="Direct link to Delete:" title="Direct link to Delete:">​</a></h4><ul><li><code>families</code></li><li><code>mysql</code></li><li><code>message-tunnel</code></li><li><code>boot-commands</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-adjust-loggeryml">5. Adjust <code>logger.yml</code><a href="#5-adjust-loggeryml" class="hash-link" aria-label="Direct link to 5-adjust-loggeryml" title="Direct link to 5-adjust-loggeryml">​</a></h3><p>Because of the addition of the Magic Link service, some logging stuff has changed.
In <code>logger.yml</code> make the following changes.</p><ul><li><strong>Update</strong> <code>messaging.registration-request</code> to <code>messaging.registration</code></li><li><strong>Update</strong> <code>messaging.unregistration-request</code> to <code>messaging.unregistration</code></li><li><strong>Delete</strong> <code>messaging.pong</code></li><li><strong>Update</strong> <code>console-icons.requesting-registration</code> to <code>console-icons.attempting-registration</code></li><li><strong>Update</strong> <code>console-icons.requesting-unregistration</code> to <code>console-icons.attempting-unregistration</code></li><li><strong>Delete</strong> <code>console-icons.call-for-registration</code></li><li><strong>Delete</strong> <code>console-icons.pong</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-add-parent-families-to-familiesfamilytypeyml">6. Add parent families to <code>families/family.type.yml</code><a href="#6-add-parent-families-to-familiesfamilytypeyml" class="hash-link" aria-label="Direct link to 6-add-parent-families-to-familiesfamilytypeyml" title="Direct link to 6-add-parent-families-to-familiesfamilytypeyml">​</a></h3><p>In your <code>families</code> folder, adjust each of your individual family config files by adding the following code block just below the first comment block.</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">############################################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                      Parent Family                       #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                                                          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#               ---------------------------                #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | The parent family is the family that players will      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | be sent to when they run /hub (Enabled in              #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | dynamic_teleport.yml), or when a fallback occurs.      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | If the parent family is unavailable, the root family   #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | is used instead.                                       #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#               ---------------------------                #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                                                          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">parent-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-migrate-tpa-settings-to-dynamic_teleportyml">7. Migrate tpa settings to <code>dynamic_teleport.yml</code><a href="#7-migrate-tpa-settings-to-dynamic_teleportyml" class="hash-link" aria-label="Direct link to 7-migrate-tpa-settings-to-dynamic_teleportyml" title="Direct link to 7-migrate-tpa-settings-to-dynamic_teleportyml">​</a></h3><p>Assuming you&#x27;ve been using the <code>tpa</code> feature in your family configs; you&#x27;ll need to migrate these settings to <code>dynamic_teleport.yml</code>.
In <code>dynamic_teleport.yml</code> enable <code>tpa</code>, define which families it should be allowed in, and set the other options.</p><p>Afterward, delete the entire <code>tpa</code> block from each of your family configs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-update-load-balancing-comment-in-familiesfamilytypeyml">8. Update load balancing comment in <code>families/family.type.yml</code><a href="#8-update-load-balancing-comment-in-familiesfamilytypeyml" class="hash-link" aria-label="Direct link to 8-update-load-balancing-comment-in-familiesfamilytypeyml" title="Direct link to 8-update-load-balancing-comment-in-familiesfamilytypeyml">​</a></h3><p>In your <code>families</code> folder, replace each comment for <code>load-balancing</code> with the following.</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">############################################################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                        Algorithm                         #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                                                          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#               ---------------------------                #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | Depending on your needs, you might want to balance     #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | player influxes in various ways.                       #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | RustyConnector currently supports the following.       #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | balancing algorithms if there are other algorithms     #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># | you&#x27;d like to see in the future, let us know!          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                                                          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  ⚫ LEAST_CONNECTION -                                   #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             Connects players to the server with the      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             the fewest players currently connected.      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             This mode is best if you want evenly         #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             distributed players across all servers.      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  ⚫ MOST_CONNECTION -                                    #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             Connects players to the server with the      #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             the most players currently connected.        #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             This mode is best if you want to fill        #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             servers up as quickly as possible.           #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  ⚫ ROUND_ROBIN -                                        #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             Every time a connection occurs, the next     #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             server in the load balancer will be queued   #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             for the next connection.                     #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             Once the load balancer reaches the end of    #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             the server queue, the load balancer will     #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#             loop back to the beginning and start again.  #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#               ---------------------------                #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#                                                          #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#||||||||||||||||||||||||||||||||||||||||||||||||||||||||||#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">############################################################</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This new comment lists a new load balancing algorithm called <code>MOST_CONNECTION</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Aelysium-Group/wiki/docs/rusty-connector/docs/updating/update-from-config-v3-to-v4.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rusty-connector/docs/updating/update-from-config-v2-to-v3"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ℹ️ Updating from V2 to V3</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rusty-connector/docs/updating/update-from-config-v4-to-v5"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ℹ️ Updating from v4 to V5</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#disclaimer" class="table-of-contents__link toc-highlight">Disclaimer</a></li><li><a href="#unchanging" class="table-of-contents__link toc-highlight">Unchanging</a></li><li><a href="#walkthrough" class="table-of-contents__link toc-highlight">Walkthrough</a><ul><li><a href="#1-update-config-version" class="table-of-contents__link toc-highlight">1. Update config version</a></li><li><a href="#2-update-server-lifecycle" class="table-of-contents__link toc-highlight">2. Update server lifecycle.</a></li><li><a href="#3-migrate-families-to-familiesyml" class="table-of-contents__link toc-highlight">3. Migrate <code>families</code> to <code>families.yml</code></a></li><li><a href="#3-migrate-mysql-to-familiesyml" class="table-of-contents__link toc-highlight">3. Migrate <code>mysql</code> to <code>families.yml</code></a></li><li><a href="#4-clean-up-configyml" class="table-of-contents__link toc-highlight">4. Clean up <code>config.yml</code></a></li><li><a href="#5-adjust-loggeryml" class="table-of-contents__link toc-highlight">5. Adjust <code>logger.yml</code></a></li><li><a href="#6-add-parent-families-to-familiesfamilytypeyml" class="table-of-contents__link toc-highlight">6. Add parent families to <code>families/family.type.yml</code></a></li><li><a href="#7-migrate-tpa-settings-to-dynamic_teleportyml" class="table-of-contents__link toc-highlight">7. Migrate tpa settings to <code>dynamic_teleport.yml</code></a></li><li><a href="#8-update-load-balancing-comment-in-familiesfamilytypeyml" class="table-of-contents__link toc-highlight">8. Update load balancing comment in <code>families/family.type.yml</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.aelysium.group" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Aelysium-Group" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">2024 © Aelysium</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fb3405e0.js"></script>
<script src="/assets/js/main.ab42f3d2.js"></script>
</body>
</html>